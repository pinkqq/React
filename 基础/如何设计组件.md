## 将 UI 划分为组件树的形式

在传统模式下，我们的思维方式是：

- 创建 `html` 模版
- 通过 `javascript` 拿到页面数据，并展示到页面
- 监听 `form` 数据，对 `submit button` 绑定提交事件

如果是 **React Component**，可以将页面拆分如 ⬇️：
![react-com01.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c09fc75c0ab408a90f637d5ca21d1c1~tplv-k3u1fbpfcp-watermark.image)

以及代码形式：

```jsx
class CommentBox extends Component {
  render() {
    return (
      <div class="comment-box">
        <h1>Comments(3)</h1>
        <CommentList />
        <CommentForm>
      </div>
    );
  }
}
```

显而易见，这种拆分方式使结构更简单、更清楚。

## 什么是 React 组件

> 组件允许你将 UI 拆分为独立可复用的代码片段，并对每个片段进行独立构思。

组件，从概念上类似于 `JavaScript` 函数。它接受任意的入参（即 `props`），并返回用于描述页面展示内容的 `React` 元素。

![未命名文件 (1).jpg](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ed3a4746ea3246d4bb313b6c744cc354~tplv-k3u1fbpfcp-watermark.image)
（ props: 外部传入的属性；state：内部维护的状态 ）

**React 组件的三个特征**：

1. 组件一般不提供方法，而是一种状态机（状态是什么，结果就是什么）
2. 组件可以理解为一个纯函数（参数与结果对应）
3. 单向数据流（ 父组件可以向子组件传递 `props`，但子组件不能修改父组件传递来的 `props`，子组件只能通过 `event` 通知父组件进行数据更改。）

## 创建一个简单的 React 组件

创建组件要考虑的三个方面：

1. 创建静态 UI
2. 考虑组件的状态组成（ 受控组件 or 非受控组件 ）
3. 考虑组件的交互方式（ 组件内部与组件使用者 ）

### 受控组件 vs 非受控组件

**受控组件**：表单元素状态由使用者维护

以 `input` 为例，需要指定 `value` 和 `onChange`；`value` 的值取决于外部传入什么，而不是用户输入什么

```jsx
<input value={this.state.inputMsg} onChange={this.handleChange} />
```

**非受控组件**：表单元素状态由 DOM 自身维护

不需要指定 `value` 和 `onChange`，但外界需要通过原生 `DOM Node` 才可以拿到 `value`。

```jsx
<input ref={(node) => (this.input = node)} />
```

## 创建组件的几个原则

### 何时创建组件：单一职责原则

因为组件是构建 UI 的最小元素，所以需要做到这两点：

1. 每个组件只做一件事~
2. 如果组件变得复杂，应该拆分为多个小组件

这样做的好处不仅可以拆分复杂度，还可以提高性能；页面的刷新可以锁定在更小的范围。

### 数据状态管理：DRY 原则

> **DRY**: Don’t Repeat Yourself

1. 能计算得到的状态不要单独存储
2. 组件尽量无状态，所需数据由 `props` 获取，有利于组件的复用

## 参考资料

- React 理念：https://zh-hans.reactjs.org/docs/thinking-in-react.html
