**列表页面** 是实际开发中最常见的场景，列表页面是一堆数据的集合，通过每一条记录可以进入对应的详细页面。开发列表主要需要考虑的技术点：

1. **如何翻页**：翻页过程中，数据的来源是服务器端还是客户端？
2. **如何进行内容搜索**：前端搜索 or 服务器端搜索（发送请求）
3. **如何缓存数据**：从详情页返回列表页，数据来自于前端缓存
4. **如何进行页面的刷新**：数据发生修改时，刷新缓存数据

## store 的设计

页面的数据，以及操作的管理我们都会放在 store 里，所以我们先设计一个 store 模型：

```js
const initialState = {
  items: [],
  page: 1,
  pageSize: 3,
  total: 0,
  byId: {},
  fetchListPending: false,
  fetchListError: null,
  listNeedReload: false,
};
```

## URL 的设计以及和 store 的同步

```jsx
<Switch>
  <Route path="/table/:page?">
    <Table />
  </Route>
  <Route path="/user/:userId">
    <Detail />
  </Route>
  <Route path="/">
    <Home />
  </Route>
</Switch>
```

## 处理加载状态

- 第一次渲染时的全局 loading
  ```js
  if (!items || !items.length) return 'loading...';
  ```
- 第一次渲染后的局部 loading

  ```jsx
  const { fetchListPending } = props;
  return <Table loading={fetchListPending} />;
  ```

## 错误处理

```js
const { fetchListError } = porps;
if (fetchListError) {
  return <div>{fetchListError.error.message}</div>;
}
```
